<% content_for :title, "Order ##{@order.id}" %>

<div class="mt-4">
  <%= turbo_stream_from "order_#{@order.id}" %>

  <%= render "orders/status", order: @order %>

  <% if @order.placed_at %>
    <p class="text-sm text-coffee-500 dark:text-coffee-400 mt-3 text-center">
      Placed <%= @order.placed_at.strftime("%b %-d at %-I:%M %p") %>
    </p>
  <% end %>

  <div class="mt-4 space-y-3">
    <% @order_items.each do |item| %>
      <div class="p-4 rounded-2xl bg-white dark:bg-coffee-900 shadow-sm">
        <div class="flex items-start justify-between">
          <div class="flex-1 min-w-0">
            <h3 class="font-semibold text-coffee-800 dark:text-coffee-100"><%= item.product.name %></h3>
            <p class="text-sm text-coffee-500 dark:text-coffee-400 mt-0.5"><%= item.customization_summary %></p>
            <% if item.quantity > 1 %>
              <p class="text-sm text-coffee-500 dark:text-coffee-400">Qty: <%= item.quantity %></p>
            <% end %>
          </div>
          <p class="font-semibold text-coffee-800 dark:text-coffee-100 ml-4"><%= item.display_line_total %></p>
        </div>
      </div>
    <% end %>
  </div>

  <div class="mt-4 p-4 rounded-2xl bg-white dark:bg-coffee-900 shadow-sm">
    <div class="flex items-center justify-between">
      <span class="font-semibold text-coffee-800 dark:text-coffee-100">Total</span>
      <span class="text-lg font-bold text-coffee-800 dark:text-coffee-100"><%= @order.display_total %></span>
    </div>
  </div>
</div>
