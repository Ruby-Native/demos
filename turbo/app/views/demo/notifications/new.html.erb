<%= render "shared/header", title: "Push notifications" %>

<div class="container">
  <% if @devices.any? %>
    <p class="text-body-secondary mt-4">
      <%= pluralize(@devices.count, "device") %> registered.
    </p>
  <% else %>
    <div class="alert alert-warning mt-4">
      No devices registered. Open the app and grant push permission first.
    </div>
  <% end %>

  <%= form_with url: demo_notifications_path, method: :post, class: "mt-3" do |f| %>
    <div class="mb-3">
      <%= f.label :title, class: "form-label" %>
      <%= f.text_field :title, value: "Hello, world!", class: "form-control" %>
    </div>

    <div class="mb-3">
      <%= f.label :body, class: "form-label" %>
      <%= f.text_field :body, value: "Tap to open a link.", class: "form-control" %>
    </div>

    <div class="mb-3">
      <%= f.label :path, "URL path", class: "form-label" %>
      <%= f.text_field :path, value: "/demo", class: "form-control" %>
      <div class="form-text">Relative path the app navigates to on tap.</div>
    </div>

    <%= f.submit "Send notification", class: "btn btn-primary", disabled: @devices.none? %>
  <% end %>
</div>
