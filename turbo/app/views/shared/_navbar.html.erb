<%= return if native_app? && !user_signed_in? %>

<nav class="navbar navbar-expand-sm fixed-top bg-body-tertiary">
  <div class="container<%= " d-flex justify-content-between" if native_app? %>">
    <% if native_app? %>
      <div style="width: 40px;">
        <%= native_back_button class: "nav-link p-0" %>
      </div>

      <span class="navbar-brand mb-0"><%= content_for(:title).presence || "Bookmarks" %></span>
    <% else %>
      <%= link_to "Bookmarks", root_path, class: "navbar-brand" %>
    <% end %>

    <% unless native_app? %>
      <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>
    <% end %>

    <div class="<%= native_app? ? "" : "collapse navbar-collapse" %>" id="navbar">
      <% unless native_app? %>
        <ul class="navbar-nav me-auto">
          <li class="nav-item">
            <%= link_to "Links", links_path, class: "nav-link" %>
          </li>

          <li class="nav-item">
            <%= link_to "Tags", tags_path, class: "nav-link" %>
          </li>

        </ul>
      <% end %>

      <% if user_signed_in? %>
        <div class="nav-item dropdown<%= " ms-auto" unless native_app? %>">
          <a class="nav-link p-2" href="#" role="button" data-bs-toggle="dropdown" aria-expanded="false">
            <span class="visually-hidden">User menu</span>
            <span class="bi bi-person-circle"></span>
          </a>

          <ul class="dropdown-menu dropdown-menu-end">
            <li><%= link_to current_user.email, profile_path, class: "dropdown-item text-body-secondary" %></li>
            <li><hr class="dropdown-divider"></li>
            <li><%= button_to "Sign out", session_path, method: :delete, class: "dropdown-item" %></li>
          </ul>
        </div>
      <% end %>
    </div>
  </div>
</nav>
